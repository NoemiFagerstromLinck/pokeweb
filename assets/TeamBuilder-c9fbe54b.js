import{_ as L,l as I,c as M,p as O,a as x,w as a,r as l,o as i,b as e,e as d,d as v,t as b,i as R,f as y,g as w,F as D,h as A,j as G}from"./index-36d70dcf.js";import{u as H}from"./pokemon-19496bef.js";import{_ as E}from"./pokeball-pixel-7dec224a.js";const J={name:"TeamBuilder",setup(){const r=H(),o=I(""),T=M(()=>r.teamCoverage),t=I(null);async function N(){const n=o.value.trim().toLowerCase();if(!n)return;const m=isNaN(Number(n))?n:Number(n);if(!(r.teamCount>=6))try{const{data:c}=await fetch(`https://pokeapi.co/api/v2/pokemon/${encodeURIComponent(m)}`);if(!c)return;const _=await c.json();r.addToTeam(_.id),o.value=""}catch{}}function V(n){r.removeFromTeam(n)}function k(){[...r.team].forEach(n=>r.removeFromTeam(n))}function p(n){t.value=n}function C(n){if(t.value===null||t.value===n)return;const m=[...r.teamData],[c]=m.splice(t.value,1);m.splice(n,0,c),r.team=m.map(_=>_.id),r.loadTeam(),t.value=null}return O(()=>{r.loadTeam()}),{store:r,addInput:o,handleAdd:N,remove:V,clearTeam:k,coverage:T,onDragStart:p,onDrop:C}}},Q={class:"d-flex flex-wrap"},W={key:0,class:"text-disabled"},X=["src","alt"],Y={class:"text-subtitle-2",style:{"text-transform":"capitalize"}};function Z(r,o,T,t,N,V){const k=l("v-toolbar-title"),p=l("v-spacer"),C=l("v-icon"),n=l("v-btn"),m=l("v-app-bar"),c=l("v-card-title"),_=l("v-divider"),S=l("v-text-field"),f=l("v-col"),z=l("v-chip"),h=l("v-row"),j=l("v-avatar"),B=l("v-card"),F=l("v-alert"),P=l("v-card-text"),q=l("v-container"),K=l("v-main"),U=l("v-app");return i(),x(U,{class:"pixel-font"},{default:a(()=>[e(m,{class:"gba-app-bar",flat:""},{default:a(()=>[e(k,{class:"d-flex align-center gba-title"},{default:a(()=>[...o[2]||(o[2]=[d("img",{src:E,alt:"Pokeball pixel",style:{height:"2.2em","margin-right":"0.5em","vertical-align":"middle"}},null,-1),d("span",{class:"gba-title-text gba-title-pixel"},"Equipo",-1)])]),_:1}),e(p),e(n,{to:"/",variant:"outlined",color:"yellow",class:"pixel-font"},{default:a(()=>[e(C,{left:""},{default:a(()=>[...o[3]||(o[3]=[v("mdi-arrow-left",-1)])]),_:1}),o[4]||(o[4]=v(" Volver",-1))]),_:1})]),_:1}),e(K,null,{default:a(()=>[e(q,null,{default:a(()=>[e(B,{class:"mb-4",variant:"outlined",rounded:"xl"},{default:a(()=>[e(c,{class:"text-subtitle-1 d-flex align-center"},{default:a(()=>[o[6]||(o[6]=d("img",{src:E,alt:"Pokeball pixel",style:{height:"1.5em","margin-right":"0.5em","vertical-align":"middle"}},null,-1)),v(" Equipo ("+b(t.store.teamCount)+"/6) ",1),e(p),e(n,{size:"x-small",disabled:t.store.teamCount===0,onClick:t.clearTeam,variant:"text"},{default:a(()=>[...o[5]||(o[5]=[v("Vaciar",-1)])]),_:1},8,["disabled","onClick"])]),_:1}),e(_),e(P,null,{default:a(()=>[e(h,{class:"align-center"},{default:a(()=>[e(f,{cols:"12",md:"4"},{default:a(()=>[e(S,{modelValue:t.addInput,"onUpdate:modelValue":o[0]||(o[0]=s=>t.addInput=s),label:"Nombre o ID",density:"compact",variant:"outlined",onKeyup:R(t.handleAdd,["enter"])},null,8,["modelValue","onKeyup"])]),_:1}),e(f,{cols:"12",md:"2"},{default:a(()=>[e(n,{color:"primary",disabled:!t.addInput||t.store.teamCount>=6,onClick:t.handleAdd},{default:a(()=>[...o[7]||(o[7]=[v("Agregar",-1)])]),_:1},8,["disabled","onClick"])]),_:1}),e(f,{cols:"12",md:"6"},{default:a(()=>[o[8]||(o[8]=d("div",{class:"text-caption"},"Cobertura de Tipos:",-1)),d("div",Q,[(i(!0),y(D,null,w(t.coverage,(s,u)=>(i(),x(z,{key:u,color:t.store.typeColors[u],class:"ma-1",size:"x-small",variant:"elevated",style:{"text-transform":"capitalize"}},{default:a(()=>[v(b(u)+" ("+b(s)+")",1)]),_:2},1032,["color"]))),128)),Object.keys(t.coverage).length===0?(i(),y("span",W,"Sin tipos todavía")):A("",!0)])]),_:1})]),_:1}),e(_,{class:"my-4"}),e(h,null,{default:a(()=>[(i(!0),y(D,null,w(t.store.teamData,(s,u)=>(i(),x(f,{key:s.id,cols:"12",sm:"6",md:"4",draggable:"true",onDragstart:g=>t.onDragStart(u),onDragover:o[1]||(o[1]=G(()=>{},["prevent"])),onDrop:g=>t.onDrop(u)},{default:a(()=>[e(B,{rounded:"xl",variant:"outlined",class:"team-member-card"},{default:a(()=>[e(c,{class:"d-flex align-center"},{default:a(()=>[e(j,{size:"56",class:"me-2"},{default:a(()=>[d("img",{src:`${r.baseUrl}images/pokemon-${s.id}.png`,alt:s.name},null,8,X)]),_:2},1024),d("div",null,[d("div",Y,"#"+b(s.id)+" "+b(s.name),1),d("div",null,[(i(!0),y(D,null,w(s.types,g=>(i(),x(z,{key:g,size:"x-small",class:"me-1",color:t.store.typeColors[g],style:{"text-transform":"capitalize"}},null,8,["color"]))),128))])]),e(p),e(n,{icon:"mdi-close",size:"x-small",variant:"text",onClick:g=>t.remove(s.id)},null,8,["onClick"])]),_:2},1024)]),_:2},1024)]),_:2},1032,["onDragstart","onDrop"]))),128)),t.store.teamCount===0?(i(),x(f,{key:0,cols:"12"},{default:a(()=>[e(F,{type:"info",variant:"tonal",title:"Equipo vacío",text:"Agrega Pokémon para ver la cobertura de tipos."})]),_:1})):A("",!0)]),_:1})]),_:1})]),_:1})]),_:1})]),_:1})]),_:1})}const ae=L(J,[["render",Z],["__scopeId","data-v-195415d9"]]);export{ae as default};
