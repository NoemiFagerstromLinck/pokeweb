import{u as I,a as U}from"./pokemon-19496bef.js";import{_ as $,a as _,w as e,r as a,o as i,b as o,e as l,d as c,f as p,g as y,F as b,n as T,t as m}from"./index-36d70dcf.js";import{_ as j}from"./pokeball-pixel-7dec224a.js";const q={name:"FavoritesView",setup(){return{store:I()}},data(){return{favoriteDetails:[],loadingFavs:!1,touchStartX:0,touchCurrentX:0,swiping:!1,swipeThreshold:100}},computed:{favorites(){return this.store.favorites}},watch:{favorites:{immediate:!0,handler(){this.loadFavorites()}}},methods:{async loadFavorites(){if(this.favorites.length===0){this.favoriteDetails=[];return}this.loadingFavs=!0;try{const s=this.favorites.map(d=>this.fetchDetail(d)),t=await Promise.all(s);this.favoriteDetails=t.filter(Boolean)}finally{this.loadingFavs=!1}},async fetchDetail(s){try{const{data:t}=await U.get(`https://pokeapi.co/api/v2/pokemon/${s}`);return t}catch{return null}},unfav(s){this.store.toggleFavorite(s)},typeColor(s){var t,d,v;return this.store.typeColors[(v=(d=(t=s.types)==null?void 0:t[0])==null?void 0:d.type)==null?void 0:v.name]||"#764ba2"},onTouchStart(s,t){this.touchStartX=s.touches[0].clientX,this.swiping=!0},onTouchMove(s){if(!this.swiping)return;this.touchCurrentX=s.touches[0].clientX;const t=this.touchCurrentX-this.touchStartX;s.currentTarget.style.transform=`translateX(${t}px)`,s.currentTarget.style.opacity=1-Math.abs(t)/300},onTouchEnd(s){if(!this.swiping)return;const t=this.touchCurrentX-this.touchStartX;Math.abs(t)>this.swipeThreshold&&this.unfav(s),event.currentTarget.style.transform="",event.currentTarget.style.opacity="",this.swiping=!1,this.touchStartX=0,this.touchCurrentX=0}}},A={class:"d-flex align-center mb-2"},G={class:"text-subtitle-1 mb-1"},H={class:"d-flex flex-wrap"},J={class:"stats-grid"},K={class:"stat-name"};function O(s,t,d,v,C,u){const F=a("v-toolbar-title"),x=a("v-spacer"),w=a("v-icon"),k=a("v-btn"),S=a("v-app-bar"),X=a("v-alert-title"),V=a("v-alert"),f=a("v-col"),h=a("v-row"),g=a("v-chip"),z=a("v-img"),D=a("v-avatar"),P=a("v-divider"),B=a("v-progress-linear"),M=a("v-card"),E=a("v-container"),N=a("v-main"),L=a("v-app");return i(),_(L,{class:"pixel-font"},{default:e(()=>[o(S,{class:"gba-app-bar",flat:""},{default:e(()=>[o(F,{class:"d-flex align-center gba-title"},{default:e(()=>[...t[0]||(t[0]=[l("img",{src:j,alt:"Pokeball pixel",style:{height:"2.2em","margin-right":"0.5em","vertical-align":"middle"}},null,-1),l("span",{class:"gba-title-text gba-title-pixel"},"Favoritos",-1)])]),_:1}),o(x),o(k,{to:"/",variant:"outlined",color:"yellow",class:"pixel-font"},{default:e(()=>[o(w,{left:""},{default:e(()=>[...t[1]||(t[1]=[c("mdi-arrow-left",-1)])]),_:1}),t[2]||(t[2]=c(" Volver",-1))]),_:1})]),_:1}),o(N,null,{default:e(()=>[o(E,{class:"py-6"},{default:e(()=>[o(h,null,{default:e(()=>[o(f,{cols:"12",class:"mb-4"},{default:e(()=>[o(V,{type:"info",variant:"tonal",border:"start",prominent:""},{default:e(()=>[o(X,null,{default:e(()=>[...t[3]||(t[3]=[c("Pokémon Favoritos",-1)])]),_:1}),t[4]||(t[4]=l("div",null,"Se almacenan en LocalStorage. Puedes marcarlos desde la vista principal.",-1))]),_:1})]),_:1})]),_:1}),u.favorites.length===0?(i(),_(h,{key:0},{default:e(()=>[o(f,{cols:"12",class:"text-center"},{default:e(()=>[o(g,{color:"red",class:"ma-2",size:"large",variant:"elevated"},{default:e(()=>[...t[5]||(t[5]=[c("Sin favoritos aún",-1)])]),_:1}),t[6]||(t[6]=l("p",{class:"text-caption"},"Ve a la Pokeguía y marca algunos con el corazón.",-1))]),_:1})]),_:1})):(i(),_(h,{key:1},{default:e(()=>[(i(!0),p(b,null,y(C.favoriteDetails,r=>(i(),_(f,{key:r.id,cols:"12",md:"6",lg:"4"},{default:e(()=>[o(M,{rounded:"xl",style:T({border:"3px solid "+u.typeColor(r)}),class:"pa-3 fav-card",elevation:"4",onTouchstart:n=>u.onTouchStart(n,r.id),onTouchmove:u.onTouchMove,onTouchend:n=>u.onTouchEnd(r.id)},{default:e(()=>[l("div",A,[o(D,{size:"64",class:"mr-3"},{default:e(()=>[o(z,{src:`/images/pokemon-${r.id}.png`},null,8,["src"])]),_:2},1024),l("div",null,[l("h4",G,[c(m(r.name.toUpperCase())+" ",1),o(g,{size:"x-small",color:"red"},{default:e(()=>[c("#"+m(r.id),1)]),_:2},1024)]),l("div",H,[(i(!0),p(b,null,y(r.types,n=>(i(),_(g,{key:n.type.name,size:"x-small",class:"mr-1 mb-1",style:T({backgroundColor:v.store.typeColors[n.type.name]||"#666",color:"#fff"})},{default:e(()=>[c(m(n.type.name),1)]),_:2},1032,["style"]))),128))])]),o(x),o(k,{icon:"",size:"small",color:"pink",onClick:n=>u.unfav(r.id)},{default:e(()=>[o(w,null,{default:e(()=>[...t[7]||(t[7]=[c("mdi-heart-off",-1)])]),_:1})]),_:1},8,["onClick"])]),o(P,{class:"my-2"}),l("div",J,[(i(!0),p(b,null,y(r.stats,n=>(i(),p("div",{key:n.stat.name,class:"stat-item"},[l("span",K,m(n.stat.name),1),o(B,{"model-value":n.base_stat,max:200,height:"6",rounded:"",color:"deep-purple",class:"mt-1"},null,8,["model-value"])]))),128))])]),_:2},1032,["style","onTouchstart","onTouchmove","onTouchend"])]),_:2},1024))),128))]),_:1}))]),_:1})]),_:1})]),_:1})}const Y=$(q,[["render",O],["__scopeId","data-v-0d0ccef4"]]);export{Y as default};
